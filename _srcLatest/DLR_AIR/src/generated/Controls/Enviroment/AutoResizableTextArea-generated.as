
/**
 * 	Generated by mxmlc 2.0
 *
 *	Package:	Controls.Enviroment
 *	Class: 		AutoResizableTextArea
 *	Source: 	P:\Active\EvanMoorEducationalPublishers\_svnPublic\DLR\_srcLatest\DLR_AIR\src\Controls\Enviroment\AutoResizableTextArea.mxml
 *	Template: 	flex2/compiler/mxml/gen/ClassDef.vm
 *	Time: 		2010.07.27 18:32:03 EEST
 */

package Controls.Enviroment
{

import flash.accessibility.*;
import flash.data.*;
import flash.debugger.*;
import flash.desktop.*;
import flash.display.*;
import flash.errors.*;
import flash.events.*;
import flash.events.KeyboardEvent;
import flash.external.*;
import flash.filesystem.*;
import flash.filters.*;
import flash.geom.*;
import flash.html.*;
import flash.html.script.*;
import flash.media.*;
import flash.net.*;
import flash.printing.*;
import flash.profiler.*;
import flash.system.*;
import flash.text.*;
import flash.ui.*;
import flash.utils.*;
import flash.xml.*;
import mx.binding.*;
import mx.controls.TextArea;
import mx.core.ClassFactory;
import mx.core.DeferredInstanceFromClass;
import mx.core.DeferredInstanceFromFunction;
import mx.core.IDeferredInstance;
import mx.core.IFactory;
import mx.core.IPropertyChangeNotifier;
import mx.core.mx_internal;
import mx.styles.*;



//	begin class def

public class AutoResizableTextArea
	extends mx.controls.TextArea
{

	//	instance variables

	//	type-import dummies



	//	constructor (Flex display object)
    /**
     * @private
     **/
	public function AutoResizableTextArea()
	{
		super();


		//	our style settings



		//	properties

		//	events
		this.addEventListener("keyDown", ___AutoResizableTextArea_TextArea1_keyDown);

	}

	//	initialize()
    /**
     * @private
     **/
	override public function initialize():void
	{



		super.initialize();
	}

	//	scripts
	//	<Script>, line 4 - 127

      /***************************************************************
      *
      *  Module Name:
      *     Controls\Enviroment\AutoResizableTextArea.mxml
      *
      *  Abstract:
      *     Контролл поддерживает возможность авторозширение высоты
      *
      *  Author:
      *     Evgenij Welikij   13-April-2010
      *
      *  Revision History:
      *
      ***************************************************************/


      /**
      * Static
      */


      /**
      * Private members/properties
      */
      // по умолчанию эта опция отключена
      private var _autoResizable:Boolean = false;


      /**
      * Private methods
      */
      private function ResizeTextArea():void
      {
        var totalHeight:uint = 10;

        this.validateNow();

        var noOfLines:int = this.mx_internal::getTextField().numLines;

        for (var i:int = 0; i < noOfLines; i++)
        {
          var textLineHeight:int = this.mx_internal::getTextField().getLineMetrics(i).height;

          totalHeight += textLineHeight;
        }

        this.height = totalHeight;
      }


      /**
      * Events handler
      */
      private function KeyDownHandler(event:KeyboardEvent):void
      {
        if (_autoResizable)
          ResizeTextArea();
      }


      /**
      * Initialization
      */


      /**
      * Constructor
      */


      /**
      * Virtuals methods
      */
      public override function set text(value:String):void
      {
        super.text = value;

        if (_autoResizable)
          ResizeTextArea();
      }

      public override function set htmlText(value:String):void
      {
        super.htmlText = value;

        if (_autoResizable)
          ResizeTextArea();
      }

      protected override function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
      {
        super.updateDisplayList(unscaledWidth, unscaledHeight);

        if (_autoResizable)
          ResizeTextArea();
      }


      /**
      * Public members/properties
      */
      [Bindable(event="changeAutoResize")]
      public function get autoResizeble():Boolean
      {
        return _autoResizable;
      }
      public function set autoResizeble(value:Boolean):void
      {
        _autoResizable = value;

        if (this.mx_internal::getTextField() != null && _autoResizable == true)
          ResizeTextArea();

        dispatchEvent(new Event("changeAutoResize"));
      }


      /**
      * Public methods
      */


    

	//	end scripts


    //	supporting function definitions for properties, events, styles, effects
/**
 * @private
 **/
public function ___AutoResizableTextArea_TextArea1_keyDown(event:flash.events.KeyboardEvent):void
{
	KeyDownHandler(event)
}





	//	embed carrier vars
	//	end embed carrier vars


//	end class def
}

//	end package def
}
